<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A library meant for fast, random number generation with quick compile time, and minimal dependencies."><meta name="keywords" content="rust, rustlang, rust-lang, nanorand"><title>nanorand - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="../crates.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../nanorand/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../nanorand/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Crate nanorand</a></h2><div class="sidebar-elems"><div class="block"><ul><li class="version">Version 0.7.0</li><li><a id="all-types" href="all.html">All Items</a></li></ul></div><section><div class="block"><ul><li><a href="#reexports">Re-exports</a></li><li><a href="#modules">Modules</a></li></ul></div></section></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../nanorand/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><div id="settings-menu" tabindex="-1">
                                <a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div>
                        </div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">nanorand</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/nanorand/lib.rs.html#1-122">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A library meant for fast, random number generation with quick compile time, and minimal dependencies.</p>
<h2 id="examples"><a href="#examples">Examples</a></h2><h3 id="generating-a-number-with-an-initialized-rng"><a href="#generating-a-number-with-an-initialized-rng">Generating a number with an initialized RNG</a></h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">nanorand</span>::{<span class="ident">Rng</span>, <span class="ident">WyRand</span>};

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">rng</span> <span class="op">=</span> <span class="ident">WyRand::new</span>();
<span class="macro">println!</span>(<span class="string">&quot;Random number: {}&quot;</span>, <span class="ident">rng</span>.<span class="ident">generate</span>::<span class="op">&lt;</span><span class="ident">u64</span><span class="op">&gt;</span>());</code></pre></div>
<h3 id="generating-a-number-with-a-thread-local-rng"><a href="#generating-a-number-with-a-thread-local-rng">Generating a number with a thread-local RNG</a></h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">nanorand::Rng</span>;

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">rng</span> <span class="op">=</span> <span class="ident">nanorand::tls_rng</span>();
<span class="macro">println!</span>(<span class="string">&quot;Random number: {}&quot;</span>, <span class="ident">rng</span>.<span class="ident">generate</span>::<span class="op">&lt;</span><span class="ident">u64</span><span class="op">&gt;</span>());</code></pre></div>
<h3 id="generating-a-number-in-a-range"><a href="#generating-a-number-in-a-range">Generating a number in a range</a></h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">nanorand</span>::{<span class="ident">Rng</span>, <span class="ident">WyRand</span>};

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">rng</span> <span class="op">=</span> <span class="ident">WyRand::new</span>();
<span class="macro">println!</span>(<span class="string">&quot;Random number between 1 and 100: {}&quot;</span>, <span class="ident">rng</span>.<span class="ident">generate_range</span>(<span class="number">1_u64</span>..<span class="op">=</span><span class="number">100</span>));
<span class="macro">println!</span>(<span class="string">&quot;Random number between -100 and 50: {}&quot;</span>, <span class="ident">rng</span>.<span class="ident">generate_range</span>(<span class="op">-</span><span class="number">100_i64</span>..<span class="op">=</span><span class="number">50</span>));</code></pre></div>
<h4 id="buffering-random-bytes"><a href="#buffering-random-bytes">Buffering random bytes</a></h4>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">nanorand</span>::{<span class="ident">Rng</span>, <span class="ident">BufferedRng</span>, <span class="ident">WyRand</span>};

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">thingy</span> <span class="op">=</span> [<span class="number">0u8</span>; <span class="number">5</span>];
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">rng</span> <span class="op">=</span> <span class="ident">BufferedRng::new</span>(<span class="ident">WyRand::new</span>());
<span class="ident">rng</span>.<span class="ident">fill</span>(<span class="kw-2">&amp;mut</span> <span class="ident">thingy</span>);
<span class="comment">// As WyRand generates 8 bytes of output, and our target is only 5 bytes,</span>
<span class="comment">// 3 bytes will remain in the buffer.</span>
<span class="macro">assert_eq!</span>(<span class="ident">rng</span>.<span class="ident">buffered</span>(), <span class="number">3</span>);</code></pre></div>
<h3 id="shuffling-a-vec"><a href="#shuffling-a-vec">Shuffling a Vec</a></h3>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">nanorand</span>::{<span class="ident">Rng</span>, <span class="ident">WyRand</span>};

<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">rng</span> <span class="op">=</span> <span class="ident">WyRand::new</span>();
<span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">items</span> <span class="op">=</span> <span class="macro">vec!</span>[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>];
<span class="ident">rng</span>.<span class="ident">shuffle</span>(<span class="kw-2">&amp;mut</span> <span class="ident">items</span>);</code></pre></div>
<h3 id="why-should-i-use-this-over"><a href="#why-should-i-use-this-over">Why should I use this over…</a></h3>
<ul>
<li><code>rand</code> - The standard rand crate is a complex beast. It contains unsafe code in the core implementations, and while it has much more options than we do, that’s kind of the point. We’re straight to the point, while rand is everything and the kitchen sink.</li>
<li><code>fastrand</code>, <code>oorandom</code>, <code>random-fast-rng</code>, or <code>randomize</code> - These are all minimal, zero-dep implementations of the PCG family of RNGs (Pcg32 and Pcg64). While these are decent, they are <em>much</em> slower than wyrand (which beats the speed of these Pcg32 implementations while providing 64 random bits), and do not provide CSPRNGs.</li>
<li><code>getrandom</code> - The getrandom crate just provides OS entropy sources. It is not meant for random number generation. In fact, we provide it as an optional entropy source.</li>
</ul>
<h3 id="rng-implementations"><a href="#rng-implementations">RNG Implementations</a></h3><div><table><thead><tr><th style="text-align: center"><strong>RNG</strong></th><th style="text-align: center"><strong>nanorand type</strong></th><th style="text-align: center"><strong>Output Size</strong></th><th style="text-align: center"><strong>Cryptographically Secure</strong></th><th style="text-align: center"><strong>Speed</strong><sup>1</sup></th><th style="text-align: center"><strong>Notes</strong></th><th style="text-align: center"><strong>Original Implementation</strong></th></tr></thead><tbody>
<tr><td style="text-align: center">wyrand</td><td style="text-align: center"><a href="rand/wyrand/struct.WyRand.html"><code>nanorand::WyRand</code></a>, <a href="tls/fn.tls_rng.html"><code>nanorand::tls::TlsWyRand</code></a></td><td style="text-align: center">64 bits (<code>u64</code>)</td><td style="text-align: center">🚫</td><td style="text-align: center">16.4 GB/s</td><td style="text-align: center"></td><td style="text-align: center"><a href="https://github.com/lemire/testingRNG/blob/master/source/wyrand.h">https://github.com/lemire/testingRNG/blob/master/source/wyrand.h</a></td></tr>
<tr><td style="text-align: center">Pcg64</td><td style="text-align: center"><a href="rand/pcg64/struct.Pcg64.html"><code>nanorand::Pcg64</code></a></td><td style="text-align: center">64 bits (<code>u64</code>)</td><td style="text-align: center">🚫</td><td style="text-align: center">1.6 GB/s</td><td style="text-align: center"></td><td style="text-align: center"><a href="https://github.com/rkern/pcg64">https://github.com/rkern/pcg64</a></td></tr>
<tr><td style="text-align: center">ChaCha</td><td style="text-align: center"><a href="rand/chacha/struct.ChaCha.html"><code>nanorand::ChaCha</code></a></td><td style="text-align: center">512 bits (<code>[u32; 16]</code>)</td><td style="text-align: center">✅</td><td style="text-align: center">204 MB/s (ChaCha8), 79 MB/s (ChaCha20)</td><td style="text-align: center">Only works in Rust 1.47 or above</td><td style="text-align: center"><a href="https://cr.yp.to/chacha.html">https://cr.yp.to/chacha.html</a></td></tr>
</tbody></table>
</div>
<p><sup>1. Speed benchmarked on an M1 Macbook Air</sup></p>
<h3 id="entropy-sources"><a href="#entropy-sources">Entropy Sources</a></h3>
<p><em>Listed in order of priority</em></p>
<ul>
<li>If the <code>getrandom</code> feature is enabled, then <a href="https://docs.rs/getrandom/*/getrandom/fn.getrandom.html"><code>getrandom::getrandom</code></a> will be called, and no other entropy sources will be used.</li>
<li>If the <code>rdseed</code> feature is enabled, and is running on an x86(-64) system with the <a href="https://en.wikipedia.org/wiki/RDRAND">RDSEED</a> instruction, then
we will attempt to source as much entropy as possible via our <a href="entropy::rdseed_entropy"><code>rdseed_entropy</code></a> function</li>
<li>Linux and Android will attempt to use the <a href="https://man7.org/linux/man-pages/man2/getrandom.2.html"><code>getrandom</code></a> syscall.</li>
<li>macOS and iOS (Darwin-based systems) will use Security.framework’s <a href="https://developer.apple.com/documentation/security/1399291-secrandomcopybytes"><code>SecRandomCopyBytes</code></a>.</li>
<li>Windows
<ul>
<li>If we’re targeting UWP, then the <a href="https://docs.microsoft.com/en-us/windows/win32/api/bcrypt/nf-bcrypt-bcryptgenrandom"><code>BCryptGenRandom</code></a> is used with system-preferred RNG (<code>BCRYPT_USE_SYSTEM_PREFERRED_RNG</code>).</li>
<li>Otherwise, we’ll use <a href="https://docs.microsoft.com/en-us/windows/win32/api/ntsecapi/nf-ntsecapi-rtlgenrandom"><code>RtlGenRandom</code></a>.</li>
</ul>
</li>
</ul>
<h3 id="feature-flags"><a href="#feature-flags">Feature Flags</a></h3>
<ul>
<li><code>alloc</code> (default) - Enables Rust <code>alloc</code> lib features, such as a buffering Rng wrapper.</li>
<li><code>std</code> (default) - Enables Rust <code>std</code> lib features, such as seeding from OS entropy sources. Requires <code>alloc</code> to be enabled.</li>
<li><code>tls</code> (default) - Enables a thread-local <a href="rand/wyrand/struct.WyRand.html"><code>WyRand</code></a> RNG (see below). Requires <code>std</code> to be enabled.</li>
<li><code>wyrand</code> (default) - Enable the <a href="rand/wyrand/struct.WyRand.html"><code>WyRand</code></a> RNG.</li>
<li><code>pcg64</code> (default) - Enable the <a href="rand/pcg64/struct.Pcg64.html"><code>Pcg64</code></a>  RNG.</li>
<li><code>chacha</code> - Enable the <a href="rand/chacha/struct.ChaCha.html"><code>ChaCha</code></a> RNG. Requires Rust 1.47 or later.</li>
<li><code>rdseed</code> - On x86 and x86-64 platforms, the <code>rdseed</code> intrinsic will be used when OS entropy isn’t available.</li>
<li><code>zeroize</code> - Implement the <a href="https://crates.io/crates/zeroize">Zeroize</a> trait for all RNGs.</li>
<li><code>getrandom</code> - Use the <a href="https://crates.io/crates/getrandom"><code>getrandom</code></a> crate as an entropy source. Works on most systems, optional due to the fact that it brings in more dependencies.</li>
</ul>
<h3 id="msrv"><a href="#msrv">MSRV</a></h3>
<p>The minimum supported Rust version for the latest version of nanorand is <strong>Rust 1.56.0</strong>, released October 21st, 2021.</p>
</div></details><h2 id="reexports" class="small-section-header"><a href="#reexports">Re-exports</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left import-item" id="reexport.BufferedRng"><code>pub use buffer::<a class="struct" href="buffer/struct.BufferedRng.html" title="struct nanorand::buffer::BufferedRng">BufferedRng</a>;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item" id="reexport.tls_rng"><code>pub use tls::<a class="fn" href="tls/fn.tls_rng.html" title="fn nanorand::tls::tls_rng">tls_rng</a>;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use <a class="mod" href="gen/index.html" title="mod nanorand::gen">gen</a>::*;</code></div><div class="item-right docblock-short"></div></div><div class="item-row"><div class="item-left import-item"><code>pub use <a class="mod" href="rand/index.html" title="mod nanorand::rand">rand</a>::*;</code></div><div class="item-right docblock-short"></div></div></div><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="buffer/index.html" title="nanorand::buffer mod">buffer</a></div><div class="item-right docblock-short"><p>Provides a buffered wrapper for RNGs, preventing bits from being wasted.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="crypto/index.html" title="nanorand::crypto mod">crypto</a></div><div class="item-right docblock-short"><p>Implementation of cryptography, for CSPRNGs.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="entropy/index.html" title="nanorand::entropy mod">entropy</a></div><div class="item-right docblock-short"><p>Sources for obtaining entropy.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="gen/index.html" title="nanorand::gen mod">gen</a></div><div class="item-right docblock-short"><p>Traits for generating types from an RNG.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="rand/index.html" title="nanorand::rand mod">rand</a></div><div class="item-right docblock-short"><p>RNG algorithms.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="tls/index.html" title="nanorand::tls mod">tls</a></div><div class="item-right docblock-short"><p>Provides a thread-local <a href="rand/wyrand/struct.WyRand.html" title="WyRand"><code>WyRand</code></a> RNG.</p>
</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="nanorand" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.63.0 (4b91a6ea7 2022-08-08)" ></div>
</body></html>