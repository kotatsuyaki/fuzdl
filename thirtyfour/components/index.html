<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Components and component wrappers."><meta name="keywords" content="rust, rustlang, rust-lang, components"><title>thirtyfour::components - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../../dark.css" disabled><link rel="stylesheet" type="text/css" href="../../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../main.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../thirtyfour/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../../thirtyfour/index.html"><div class="logo-container"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">Module components</a></h2><div class="sidebar-elems"><section><div class="block"><ul><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Definitions</a></li><li><a href="#derives">Derive Macros</a></li></ul></div></section></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../../thirtyfour/index.html"><img class="rust-logo" src="../../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><div id="settings-menu" tabindex="-1">
                                <a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../wheel.svg"></a></div>
                        </div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Module <a href="../index.html">thirtyfour</a>::<wbr><a class="mod" href="#">components</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../../src/thirtyfour/components/mod.rs.html#1-104">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Components and component wrappers.</p>
<h2 id="components"><a href="#components">Components</a></h2>
<p>Components allow you to wrap elements or groups of elements in order to abstract the
element selectors and focus more on the logic and flow of your website or web app.</p>
<p>This approach may be familiar to anyone who has used a
<a href="https://www.selenium.dev/documentation/test_practices/encouraged/page_object_models/">Page Object Model</a> before.
However a <code>Component</code> can wrap any node in the DOM, not just “pages”.</p>
<p>It uses smart element resolvers that can lazily resolve elements within the component and cache them for subsequent
uses. You can also nest components, making them an extremely powerful feature for automating any modern web app.</p>
<h4 id="example"><a href="#example">Example</a></h4>
<p>Given the following HTML structure:</p>
<div class="example-wrap"><pre class="language-html"><code>&lt;div id=&quot;checkbox-section&quot;&gt;
    &lt;label&gt;
        &lt;input type=&quot;checkbox&quot; id=&quot;checkbox-option-1&quot; /&gt;
        Option 1
    &lt;/label&gt;

    &lt;label&gt;
        &lt;input type=&quot;checkbox&quot; id=&quot;checkbox-disabled&quot; disabled /&gt;
        Option 2
    &lt;/label&gt;

    &lt;label&gt;
        &lt;input type=&quot;checkbox&quot; id=&quot;checkbox-hidden&quot; style=&quot;display: none;&quot; /&gt;
        Option 3
    &lt;/label&gt;
&lt;/div&gt;</code></pre></div>
<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="doccomment">/// This component shows how to wrap a simple web component.</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Component</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">CheckboxComponent</span> {
    <span class="ident">base</span>: <span class="ident">WebElement</span>, <span class="comment">// This is the &lt;label&gt; element</span>
    <span class="attribute">#[<span class="ident">by</span>(<span class="ident">css</span> <span class="op">=</span> <span class="string">&quot;input[type=&#39;checkbox&#39;]&quot;</span>)]</span>
    <span class="ident">input</span>: <span class="ident">ElementResolver</span><span class="op">&lt;</span><span class="ident">WebElement</span><span class="op">&gt;</span>, <span class="comment">// This is the &lt;input /&gt; element</span>
}

<span class="kw">impl</span> <span class="ident">CheckboxComponent</span> {
    <span class="doccomment">/// Return true if the checkbox is ticked.</span>
    <span class="kw">pub</span> <span class="kw">async</span> <span class="kw">fn</span> <span class="ident">is_ticked</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; <span class="ident">WebDriverResult</span><span class="op">&lt;</span><span class="ident">bool</span><span class="op">&gt;</span> {
        <span class="kw">let</span> <span class="ident">elem</span> <span class="op">=</span> <span class="self">self</span>.<span class="ident">input</span>.<span class="ident">resolve</span>().<span class="kw">await</span><span class="question-mark">?</span>;
        <span class="kw">let</span> <span class="ident">prop</span> <span class="op">=</span> <span class="ident">elem</span>.<span class="ident">prop</span>(<span class="string">&quot;checked&quot;</span>).<span class="kw">await</span><span class="question-mark">?</span>;
        <span class="prelude-val">Ok</span>(<span class="ident">prop</span>.<span class="ident">unwrap_or_default</span>() <span class="op">==</span> <span class="string">&quot;true&quot;</span>)
    }

    <span class="doccomment">/// Tick the checkbox if it is clickable and isn&#39;t already ticked.</span>
    <span class="kw">pub</span> <span class="kw">async</span> <span class="kw">fn</span> <span class="ident">tick</span>(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; <span class="ident">WebDriverResult</span><span class="op">&lt;</span>()<span class="op">&gt;</span> {
        <span class="comment">// This checks that the element is present before returning the element.</span>
        <span class="comment">// If the element had become stale, this would implicitly re-query the element.</span>
        <span class="kw">let</span> <span class="ident">elem</span> <span class="op">=</span> <span class="self">self</span>.<span class="ident">input</span>.<span class="ident">resolve_present</span>().<span class="kw">await</span><span class="question-mark">?</span>;
        <span class="kw">if</span> <span class="ident">elem</span>.<span class="ident">is_clickable</span>().<span class="kw">await</span><span class="question-mark">?</span> <span class="op">&amp;&amp;</span> <span class="op">!</span><span class="self">self</span>.<span class="ident">is_ticked</span>().<span class="kw">await</span><span class="question-mark">?</span> {
            <span class="ident">elem</span>.<span class="ident">click</span>().<span class="kw">await</span><span class="question-mark">?</span>;
            <span class="comment">// Now make sure it&#39;s ticked.</span>
            <span class="macro">assert!</span>(<span class="self">self</span>.<span class="ident">is_ticked</span>().<span class="kw">await</span><span class="question-mark">?</span>);
        }

        <span class="prelude-val">Ok</span>(())
    }
}

<span class="doccomment">/// This component shows how to nest components inside others.</span>
<span class="attribute">#[<span class="ident">derive</span>(<span class="ident">Debug</span>, <span class="ident">Clone</span>, <span class="ident">Component</span>)]</span>
<span class="kw">pub</span> <span class="kw">struct</span> <span class="ident">CheckboxSectionComponent</span> {
    <span class="ident">base</span>: <span class="ident">WebElement</span>, <span class="comment">// This is the outer &lt;div&gt;</span>
    <span class="attribute">#[<span class="ident">by</span>(<span class="ident">tag</span> <span class="op">=</span> <span class="string">&quot;label&quot;</span>, <span class="ident">allow_empty</span>)]</span>
    <span class="ident">boxes</span>: <span class="ident">ElementResolver</span><span class="op">&lt;</span><span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">CheckboxComponent</span><span class="op">&gt;</span><span class="op">&gt;</span>, <span class="comment">// ElementResolver works with Components too.</span>
    <span class="comment">// Other fields will be initialised with Default::default().</span>
    <span class="ident">my_field</span>: <span class="ident">bool</span>,
}</code></pre></div>
<p>So how do you construct a Component?</p>
<p>Simple! The <code>Component</code> derive automatically implements <code>From&lt;WebElement&gt;</code>.</p>

<div class='information'><div class='tooltip ignore'>ⓘ</div></div><div class="example-wrap"><pre class="rust rust-example-rendered ignore"><code><span class="kw">let</span> <span class="ident">elem</span> <span class="op">=</span> <span class="ident">driver</span>.<span class="ident">query</span>(<span class="ident">By::Id</span>(<span class="string">&quot;checkbox-section&quot;</span>)).<span class="kw">await</span><span class="question-mark">?</span>;
<span class="kw">let</span> <span class="ident">component</span> <span class="op">=</span> <span class="ident">CheckboxSectionComponent::from</span>(<span class="ident">elem</span>);

<span class="comment">// Now you can get the checkbox components easily like this.</span>
<span class="kw">let</span> <span class="ident">checkboxes</span> <span class="op">=</span> <span class="ident">component</span>.<span class="ident">boxes</span>.<span class="ident">resolve</span>().<span class="kw">await</span><span class="question-mark">?</span>;
<span class="kw">for</span> <span class="ident">checkbox</span> <span class="kw">in</span> <span class="ident">checkboxes</span> {
    <span class="ident">checkbox</span>.<span class="ident">tick</span>().<span class="kw">await</span><span class="question-mark">?</span>;
}</code></pre></div>
<p>This allows you to wrap any component using <code>ElementResolver</code> to resolve elements and nested
components easily.</p>
</div></details><h2 id="macros" class="small-section-header"><a href="#macros">Macros</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.resolve.html" title="thirtyfour::components::resolve macro">resolve</a></div><div class="item-right docblock-short"><p><code>resolve!(x)</code> expands to <code>x.resolve().await?</code></p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="macro" href="macro.resolve_present.html" title="thirtyfour::components::resolve_present macro">resolve_present</a></div><div class="item-right docblock-short"><p><code>resolve_present!(x)</code> expands to <code>x.resolve_present().await?</code></p>
</div></div></div><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.ElementResolver.html" title="thirtyfour::components::ElementResolver struct">ElementResolver</a></div><div class="item-right docblock-short"><p>Element resolver that can resolve a particular element or list of elements on demand.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="struct" href="struct.SelectElement.html" title="thirtyfour::components::SelectElement struct">SelectElement</a></div><div class="item-right docblock-short"><p>Convenience wrapper for <code>&lt;select&gt;</code> elements.</p>
</div></div></div><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="trait" href="trait.Component.html" title="thirtyfour::components::Component trait">Component</a></div><div class="item-right docblock-short"><p>The <code>Component</code> trait is automatically implemented by the <code>Component</code> derive macro.</p>
</div></div></div><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="fn" href="fn.escape_string.html" title="thirtyfour::components::escape_string fn">escape_string</a></div><div class="item-right docblock-short"><p>Escape the specified string for use in Css or XPath selector.</p>
</div></div></div><h2 id="types" class="small-section-header"><a href="#types">Type Definitions</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="type" href="type.ElementResolverMulti.html" title="thirtyfour::components::ElementResolverMulti type">ElementResolverMulti</a></div><div class="item-right docblock-short"><p>Type alias for <code>ElementResolver&lt;Vec&lt;WebElement&gt;&gt;</code> for convenience.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="type" href="type.ElementResolverSingle.html" title="thirtyfour::components::ElementResolverSingle type">ElementResolverSingle</a></div><div class="item-right docblock-short"><p>Type alias for <code>ElementResolver&lt;WebElement&gt;</code>, for convenience.</p>
</div></div></div><h2 id="derives" class="small-section-header"><a href="#derives">Derive Macros</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="derive" href="derive.Component.html" title="thirtyfour::components::Component derive">Component</a></div><div class="item-right docblock-short"><p>Derive macro for a wrapped <code>Component</code>.</p>
</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-current-crate="thirtyfour" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.63.0 (4b91a6ea7 2022-08-08)" ></div>
</body></html>