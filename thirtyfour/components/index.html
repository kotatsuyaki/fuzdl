<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Components and component wrappers."><title>thirtyfour::components - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-9ee3a5e31a2afa3e.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="thirtyfour" data-themes="" data-resource-suffix="" data-rustdoc-version="1.75.0 (82e1608df 2023-12-21)" data-channel="1.75.0" data-search-js="search-8fbf244ebcf71464.js" data-settings-js="settings-74424d7eec62a23e.js" ><script src="../../static.files/storage-fec3eaa3851e447d.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-9dd44ab47b99a0fb.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../thirtyfour/index.html">thirtyfour</a><span class="version">0.31.0</span></h2></div><h2 class="location"><a href="#">Module components</a></h2><div class="sidebar-elems"><section><ul class="block"><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#traits">Traits</a></li><li><a href="#functions">Functions</a></li><li><a href="#types">Type Aliases</a></li><li><a href="#derives">Derive Macros</a></li></ul></section><h2><a href="../index.html">In crate thirtyfour</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Module <a href="../index.html">thirtyfour</a>::<wbr><a class="mod" href="#">components</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/thirtyfour/components/mod.rs.html#1-104">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Components and component wrappers.</p>
<h2 id="components"><a href="#components">Components</a></h2>
<p>Components allow you to wrap elements or groups of elements in order to abstract the
element selectors and focus more on the logic and flow of your website or web app.</p>
<p>This approach may be familiar to anyone who has used a
<a href="https://www.selenium.dev/documentation/test_practices/encouraged/page_object_models/">Page Object Model</a> before.
However a <code>Component</code> can wrap any node in the DOM, not just “pages”.</p>
<p>It uses smart element resolvers that can lazily resolve elements within the component and cache them for subsequent
uses. You can also nest components, making them an extremely powerful feature for automating any modern web app.</p>
<h4 id="example"><a href="#example">Example</a></h4>
<p>Given the following HTML structure:</p>
<div class="example-wrap"><pre class="language-html"><code>&lt;div id=&quot;checkbox-section&quot;&gt;
    &lt;label&gt;
        &lt;input type=&quot;checkbox&quot; id=&quot;checkbox-option-1&quot; /&gt;
        Option 1
    &lt;/label&gt;

    &lt;label&gt;
        &lt;input type=&quot;checkbox&quot; id=&quot;checkbox-disabled&quot; disabled /&gt;
        Option 2
    &lt;/label&gt;

    &lt;label&gt;
        &lt;input type=&quot;checkbox&quot; id=&quot;checkbox-hidden&quot; style=&quot;display: none;&quot; /&gt;
        Option 3
    &lt;/label&gt;
&lt;/div&gt;
</code></pre></div>
<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="doccomment">/// This component shows how to wrap a simple web component.
</span><span class="attr">#[derive(Debug, Clone, Component)]
</span><span class="kw">pub struct </span>CheckboxComponent {
    base: WebElement, <span class="comment">// This is the &lt;label&gt; element
    </span><span class="attr">#[by(css = <span class="string">&quot;input[type=&#39;checkbox&#39;]&quot;</span>)]
    </span>input: ElementResolver&lt;WebElement&gt;, <span class="comment">// This is the &lt;input /&gt; element
</span>}

<span class="kw">impl </span>CheckboxComponent {
    <span class="doccomment">/// Return true if the checkbox is ticked.
    </span><span class="kw">pub async fn </span>is_ticked(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; WebDriverResult&lt;bool&gt; {
        <span class="kw">let </span>elem = <span class="self">self</span>.input.resolve().<span class="kw">await</span><span class="question-mark">?</span>;
        <span class="kw">let </span>prop = elem.prop(<span class="string">&quot;checked&quot;</span>).<span class="kw">await</span><span class="question-mark">?</span>;
        <span class="prelude-val">Ok</span>(prop.unwrap_or_default() == <span class="string">&quot;true&quot;</span>)
    }

    <span class="doccomment">/// Tick the checkbox if it is clickable and isn&#39;t already ticked.
    </span><span class="kw">pub async fn </span>tick(<span class="kw-2">&amp;</span><span class="self">self</span>) -&gt; WebDriverResult&lt;()&gt; {
        <span class="comment">// This checks that the element is present before returning the element.
        // If the element had become stale, this would implicitly re-query the element.
        </span><span class="kw">let </span>elem = <span class="self">self</span>.input.resolve_present().<span class="kw">await</span><span class="question-mark">?</span>;
        <span class="kw">if </span>elem.is_clickable().<span class="kw">await</span><span class="question-mark">? </span>&amp;&amp; !<span class="self">self</span>.is_ticked().<span class="kw">await</span><span class="question-mark">? </span>{
            elem.click().<span class="kw">await</span><span class="question-mark">?</span>;
            <span class="comment">// Now make sure it&#39;s ticked.
            </span><span class="macro">assert!</span>(<span class="self">self</span>.is_ticked().<span class="kw">await</span><span class="question-mark">?</span>);
        }

        <span class="prelude-val">Ok</span>(())
    }
}

<span class="doccomment">/// This component shows how to nest components inside others.
</span><span class="attr">#[derive(Debug, Clone, Component)]
</span><span class="kw">pub struct </span>CheckboxSectionComponent {
    base: WebElement, <span class="comment">// This is the outer &lt;div&gt;
    </span><span class="attr">#[by(tag = <span class="string">&quot;label&quot;</span>, allow_empty)]
    </span>boxes: ElementResolver&lt;Vec&lt;CheckboxComponent&gt;&gt;, <span class="comment">// ElementResolver works with Components too.
    // Other fields will be initialised with Default::default().
    </span>my_field: bool,
}</code></pre></div>
<p>So how do you construct a Component?</p>
<p>Simple! The <code>Component</code> derive automatically implements <code>From&lt;WebElement&gt;</code>.</p>

<div class="example-wrap ignore"><a href="#" class="tooltip" title="This example is not tested">ⓘ</a><pre class="rust rust-example-rendered"><code><span class="kw">let </span>elem = driver.query(By::Id(<span class="string">&quot;checkbox-section&quot;</span>)).<span class="kw">await</span><span class="question-mark">?</span>;
<span class="kw">let </span>component = CheckboxSectionComponent::from(elem);

<span class="comment">// Now you can get the checkbox components easily like this.
</span><span class="kw">let </span>checkboxes = component.boxes.resolve().<span class="kw">await</span><span class="question-mark">?</span>;
<span class="kw">for </span>checkbox <span class="kw">in </span>checkboxes {
    checkbox.tick().<span class="kw">await</span><span class="question-mark">?</span>;
}</code></pre></div>
<p>This allows you to wrap any component using <code>ElementResolver</code> to resolve elements and nested
components easily.</p>
</div></details><h2 id="macros" class="small-section-header"><a href="#macros">Macros</a></h2><ul class="item-table"><li><div class="item-name"><a class="macro" href="macro.resolve.html" title="macro thirtyfour::components::resolve">resolve</a></div><div class="desc docblock-short"><code>resolve!(x)</code> expands to <code>x.resolve().await?</code></div></li><li><div class="item-name"><a class="macro" href="macro.resolve_present.html" title="macro thirtyfour::components::resolve_present">resolve_present</a></div><div class="desc docblock-short"><code>resolve_present!(x)</code> expands to <code>x.resolve_present().await?</code></div></li></ul><h2 id="structs" class="small-section-header"><a href="#structs">Structs</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.ElementResolver.html" title="struct thirtyfour::components::ElementResolver">ElementResolver</a></div><div class="desc docblock-short">Element resolver that can resolve a particular element or list of elements on demand.</div></li><li><div class="item-name"><a class="struct" href="struct.SelectElement.html" title="struct thirtyfour::components::SelectElement">SelectElement</a></div><div class="desc docblock-short">Convenience wrapper for <code>&lt;select&gt;</code> elements.</div></li></ul><h2 id="traits" class="small-section-header"><a href="#traits">Traits</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.Component.html" title="trait thirtyfour::components::Component">Component</a></div><div class="desc docblock-short">The <code>Component</code> trait is automatically implemented by the <code>Component</code> derive macro.</div></li></ul><h2 id="functions" class="small-section-header"><a href="#functions">Functions</a></h2><ul class="item-table"><li><div class="item-name"><a class="fn" href="fn.escape_string.html" title="fn thirtyfour::components::escape_string">escape_string</a></div><div class="desc docblock-short">Escape the specified string for use in Css or XPath selector.</div></li></ul><h2 id="types" class="small-section-header"><a href="#types">Type Aliases</a></h2><ul class="item-table"><li><div class="item-name"><a class="type" href="type.ElementResolverMulti.html" title="type thirtyfour::components::ElementResolverMulti">ElementResolverMulti</a></div><div class="desc docblock-short">Type alias for <code>ElementResolver&lt;Vec&lt;WebElement&gt;&gt;</code> for convenience.</div></li><li><div class="item-name"><a class="type" href="type.ElementResolverSingle.html" title="type thirtyfour::components::ElementResolverSingle">ElementResolverSingle</a></div><div class="desc docblock-short">Type alias for <code>ElementResolver&lt;WebElement&gt;</code>, for convenience.</div></li></ul><h2 id="derives" class="small-section-header"><a href="#derives">Derive Macros</a></h2><ul class="item-table"><li><div class="item-name"><a class="derive" href="derive.Component.html" title="derive thirtyfour::components::Component">Component</a></div><div class="desc docblock-short">Derive macro for a wrapped <code>Component</code>.</div></li></ul></section></div></main></body></html>